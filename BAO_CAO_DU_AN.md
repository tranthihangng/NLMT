# ğŸ“Š BÃO CÃO Dá»° ÃN
# Há»† THá»NG GIÃM SÃT VÃ€ PHÃ‚N TÃCH HIá»†U SUáº¤T PIN Máº¶T TRá»œI

---

## ğŸ“‹ Má»¤C Lá»¤C

1. [Tá»•ng quan dá»± Ã¡n](#1-tá»•ng-quan-dá»±-Ã¡n)
2. [Kiáº¿n trÃºc há»‡ thá»‘ng](#2-kiáº¿n-trÃºc-há»‡-thá»‘ng)
3. [SÆ¡ Ä‘á»“ khá»‘i](#3-sÆ¡-Ä‘á»“-khá»‘i)
4. [LÆ°u Ä‘á»“ thuáº­t toÃ¡n](#4-lÆ°u-Ä‘á»“-thuáº­t-toÃ¡n)
5. [Chá»©c nÄƒng giao diá»‡n Web](#5-chá»©c-nÄƒng-giao-diá»‡n-web)
6. [Cáº¥u trÃºc mÃ£ nguá»“n](#6-cáº¥u-trÃºc-mÃ£-nguá»“n)
7. [ThÃ´ng sá»‘ ká»¹ thuáº­t](#7-thÃ´ng-sá»‘-ká»¹-thuáº­t)
8. [Triá»ƒn khai vÃ  váº­n hÃ nh](#8-triá»ƒn-khai-vÃ -váº­n-hÃ nh)

---

## 1. Tá»”NG QUAN Dá»° ÃN

### 1.1. Má»¥c tiÃªu

XÃ¢y dá»±ng há»‡ thá»‘ng giÃ¡m sÃ¡t vÃ  phÃ¢n tÃ­ch hiá»‡u suáº¥t pin máº·t trá»i thá»i gian thá»±c, bao gá»“m:

- **GiÃ¡m sÃ¡t real-time**: Theo dÃµi Ä‘iá»‡n Ã¡p, dÃ²ng Ä‘iá»‡n, cÃ´ng suáº¥t, Ã¡nh sÃ¡ng, nhiá»‡t Ä‘á»™, Ä‘á»™ áº©m
- **PhÃ¢n tÃ­ch hiá»‡u suáº¥t**: TÃ­nh toÃ¡n Performance Ratio (PR), hiá»‡u suáº¥t chuyá»ƒn Ä‘á»•i
- **PhÃ¡t hiá»‡n báº¥t thÆ°á»ng**: Cáº£nh bÃ¡o khi cÃ³ lá»—i hoáº·c suy giáº£m hiá»‡u suáº¥t
- **LÆ°u trá»¯ dá»¯ liá»‡u**: Firebase Realtime Database lÆ°u trá»¯ dá»¯ liá»‡u theo thá»i gian
- **Giao diá»‡n web**: Dashboard trá»±c quan, há»— trá»£ phÃ¢n tÃ­ch nÃ¢ng cao

### 1.2. CÃ´ng nghá»‡ sá»­ dá»¥ng

| ThÃ nh pháº§n | CÃ´ng nghá»‡ |
|------------|-----------|
| Frontend | Streamlit, HTML/CSS/JavaScript |
| Backend | Python, Firebase Admin SDK |
| Database | Firebase Realtime Database |
| Charts | Plotly, Chart.js |
| Deployment | Streamlit Cloud |

### 1.3. ThÃ´ng sá»‘ táº¥m pin máº·t trá»i

| ThÃ´ng sá»‘ | GiÃ¡ trá»‹ | MÃ´ táº£ |
|----------|---------|-------|
| Pmax | 20W | CÃ´ng suáº¥t tá»‘i Ä‘a |
| Vmp | 16V | Äiá»‡n Ã¡p táº¡i cÃ´ng suáº¥t tá»‘i Ä‘a |
| Imp | 1.25A | DÃ²ng Ä‘iá»‡n táº¡i cÃ´ng suáº¥t tá»‘i Ä‘a |
| Voc | 19.2V | Äiá»‡n Ã¡p máº¡ch há»Ÿ |
| Isc | 1.5A | DÃ²ng Ä‘iá»‡n ngáº¯n máº¡ch |
| KÃ­ch thÆ°á»›c | 400Ã—350Ã—17mm | Chiá»u dÃ i Ã— rá»™ng Ã— dÃ y |
| Diá»‡n tÃ­ch | 0.14 mÂ² | Diá»‡n tÃ­ch hiá»‡u dá»¥ng |
| STC | 1000 W/mÂ², 25Â°C | Äiá»u kiá»‡n tiÃªu chuáº©n |

---

## 2. KIáº¾N TRÃšC Há»† THá»NG

### 2.1. Kiáº¿n trÃºc tá»•ng thá»ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Há»† THá»NG GIÃM SÃT PIN Máº¶T TRá»œI                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                            â”‚                            â”‚
          â–¼                            â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PHáº¦N Cá»¨NG    â”‚         â”‚   CLOUD/SERVER  â”‚         â”‚   GIAO DIá»†N     â”‚
â”‚   (Hardware)   â”‚         â”‚   (Backend)     â”‚         â”‚   (Frontend)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                            â”‚                            â”‚
          â–¼                            â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ ESP32/Arduino â”‚         â”‚ â€¢ Firebase RTDB â”‚         â”‚ â€¢ Streamlit App â”‚
â”‚ â€¢ Cáº£m biáº¿n INA219â”‚        â”‚ â€¢ Python Backendâ”‚         â”‚ â€¢ HTML Dashboardâ”‚
â”‚ â€¢ Cáº£m biáº¿n BH1750â”‚        â”‚ â€¢ Analysis API  â”‚         â”‚ â€¢ Plotly Charts â”‚
â”‚ â€¢ DHT22         â”‚         â”‚                 â”‚         â”‚                 â”‚
â”‚ â€¢ LoRa Module   â”‚         â”‚                 â”‚         â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                            â–²                            â”‚
          â”‚                            â”‚                            â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ WiFi/LoRa â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€ HTTPS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2. Luá»“ng dá»¯ liá»‡u

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    1s/láº§n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Real-time    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Sensor  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚ Firebase â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚   Web    â”‚
â”‚  Nodes   â”‚              â”‚   RTDB   â”‚                 â”‚ Dashboardâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                         â”‚                            â”‚
     â”‚ Äo: U, I, P, Lux,       â”‚ LÆ°u theo cáº¥u trÃºc:        â”‚ Hiá»ƒn thá»‹:
     â”‚     Temp, Humi          â”‚ /sensor_data/             â”‚ â€¢ Real-time
     â”‚                         â”‚   /{date}/                â”‚ â€¢ Biá»ƒu Ä‘á»“
     â”‚                         â”‚     /{hour}/              â”‚ â€¢ PhÃ¢n tÃ­ch
     â”‚                         â”‚       /{time}: {...}      â”‚ â€¢ Cáº£nh bÃ¡o
     â–¼                         â–¼                            â–¼
```

---

## 3. SÆ  Äá»’ KHá»I

### 3.1. SÆ¡ Ä‘á»“ khá»‘i pháº§n cá»©ng

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Táº¤M PIN Máº¶T TRá»œI (20W)                         â”‚
â”‚                              Vmp=16V, Imp=1.25A                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â”‚ (+) (-)
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Má»I Ná»I ÄO LÆ¯á»œNG                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   INA219    â”‚  â”‚   BH1750    â”‚  â”‚    DHT22    â”‚  â”‚    Táº¢I      â”‚        â”‚
â”‚  â”‚ (U, I, P)   â”‚  â”‚   (Lux)     â”‚  â”‚ (Temp,Humi) â”‚  â”‚  (Äiá»‡n trá»Ÿ) â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚ I2C            â”‚ I2C            â”‚ Digital                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                â”‚                â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚         ESP32 / Arduino         â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
          â”‚  â”‚ â€¢ Äá»c cáº£m biáº¿n (1s/láº§n)   â”‚  â”‚
          â”‚  â”‚ â€¢ Xá»­ lÃ½ dá»¯ liá»‡u           â”‚  â”‚
          â”‚  â”‚ â€¢ TÃ­nh toÃ¡n Energy        â”‚  â”‚
          â”‚  â”‚ â€¢ Gá»­i lÃªn Firebase        â”‚  â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ WiFi / LoRa
                        â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚      FIREBASE REALTIME DB       â”‚
          â”‚  nlmt-duy-default-rtdb          â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2. SÆ¡ Ä‘á»“ khá»‘i pháº§n má»m

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              á»¨NG Dá»¤NG WEB                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         app.py (Main Entry)                          â”‚   â”‚
â”‚  â”‚  â€¢ Äiá»ƒm vÃ o chÃ­nh cá»§a á»©ng dá»¥ng Streamlit                            â”‚   â”‚
â”‚  â”‚  â€¢ Cáº¥u hÃ¬nh trang, theme, navigation                                â”‚   â”‚
â”‚  â”‚  â€¢ Chá»n cháº¿ Ä‘á»™: Dashboard HTML / PhÃ¢n tÃ­ch nÃ¢ng cao                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                               â”‚                                             â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚          â–¼                    â–¼                    â–¼                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚  index.html  â”‚    â”‚ dashboard.py â”‚    â”‚  analysis.py â”‚                 â”‚
â”‚  â”‚              â”‚    â”‚              â”‚    â”‚              â”‚                 â”‚
â”‚  â”‚ â€¢ Dashboard  â”‚    â”‚ â€¢ PhÃ¢n tÃ­ch  â”‚    â”‚ â€¢ Thuáº­t toÃ¡n â”‚                 â”‚
â”‚  â”‚   Real-time  â”‚    â”‚   nÃ¢ng cao   â”‚    â”‚   phÃ¢n tÃ­ch  â”‚                 â”‚
â”‚  â”‚ â€¢ Chart.js   â”‚    â”‚ â€¢ Plotly     â”‚    â”‚ â€¢ PR, Eff    â”‚                 â”‚
â”‚  â”‚ â€¢ Firebase   â”‚    â”‚ â€¢ Streamlit  â”‚    â”‚ â€¢ Anomaly    â”‚                 â”‚
â”‚  â”‚   JS SDK     â”‚    â”‚   Widgets    â”‚    â”‚   Detection  â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3. SÆ¡ Ä‘á»“ cáº¥u trÃºc Firebase

```
Firebase Realtime Database
â”‚
â””â”€â”€ sensor_data/
    â”‚
    â”œâ”€â”€ 2025-12-28/                    â† NgÃ y (YYYY-MM-DD)
    â”‚   â”œâ”€â”€ 00/                        â† Giá» (00-23)
    â”‚   â”‚   â”œâ”€â”€ "00:00:01": {          â† Thá»i gian (HH:MM:SS)
    â”‚   â”‚   â”‚   "U": 15.2,             â† Äiá»‡n Ã¡p (V)
    â”‚   â”‚   â”‚   "Current": 0.85,       â† DÃ²ng Ä‘iá»‡n (A)
    â”‚   â”‚   â”‚   "milliWatt": 12920,    â† CÃ´ng suáº¥t (mW)
    â”‚   â”‚   â”‚   "energy": 0.5,         â† NÄƒng lÆ°á»£ng tÃ­ch lÅ©y (Wh)
    â”‚   â”‚   â”‚   "Lux": 45000,          â† Ãnh sÃ¡ng (Lux)
    â”‚   â”‚   â”‚   "Temp": 32.5,          â† Nhiá»‡t Ä‘á»™ (Â°C)
    â”‚   â”‚   â”‚   "Humi": 65.0           â† Äá»™ áº©m (%)
    â”‚   â”‚   â”‚   }
    â”‚   â”‚   â”œâ”€â”€ "00:00:02": {...}
    â”‚   â”‚   â””â”€â”€ ...
    â”‚   â”‚
    â”‚   â”œâ”€â”€ 01/
    â”‚   â”œâ”€â”€ 02/
    â”‚   â””â”€â”€ ... (Ä‘áº¿n 23)
    â”‚
    â”œâ”€â”€ 2025-12-27/
    â””â”€â”€ ...
```

---

## 4. LÆ¯U Äá»’ THUáº¬T TOÃN

### 4.1. Thuáº­t toÃ¡n tÃ­nh Performance Ratio (PR)

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚       START         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Nháº­p: P_actual,    â”‚
                    â”‚  Irradiance, Temp   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Lux â†’ Irradiance    â”‚
                    â”‚ G = Lux / 120       â”‚
                    â”‚ (W/mÂ²)              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ P_expected =        â”‚
                    â”‚ P_rated Ã— (G/1000)  â”‚
                    â”‚ Ã— (1 + Î±Ã—(T-25))    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ PR = (P_actual /    â”‚
                    â”‚       P_expected)   â”‚
                    â”‚       Ã— 100%        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚          PR >= 70%?           â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚                â”‚
                   Yesâ”‚                â”‚No
                      â–¼                â–¼
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚   NORMAL    â”‚   â”‚   WARNING   â”‚
             â”‚  (Xanh lÃ¡)  â”‚   â”‚   (VÃ ng)    â”‚
             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚        END          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2. Thuáº­t toÃ¡n phÃ¡t hiá»‡n báº¥t thÆ°á»ng

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚       START         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Äá»c dá»¯ liá»‡u má»›i:   â”‚
                    â”‚  U, I, P, Lux,      â”‚
                    â”‚  Temp, Humi         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                           â”‚
         â–¼                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Kiá»ƒm tra ngÆ°á»¡ng â”‚                       â”‚ Kiá»ƒm tra quan   â”‚
â”‚ tÄ©nh (Static)   â”‚                       â”‚ há»‡ logic        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                         â”‚
         â–¼                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ U: 0.5-25V    â”‚                       â”‚ â€¢ P â‰ˆ U Ã— I?    â”‚
â”‚ â€¢ I: 0-10A     â”‚                       â”‚ â€¢ Lux cao â†’     â”‚
â”‚ â€¢ T: -10~85Â°C  â”‚                       â”‚   P cao?        â”‚
â”‚ â€¢ Humi: 0-100% â”‚                       â”‚ â€¢ T cao â†’       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚   Eff giáº£m?     â”‚
         â”‚                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚   CÃ³ báº¥t thÆ°á»ng?      â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚           â”‚
                   Yesâ”‚           â”‚No
                      â–¼           â–¼
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚ PhÃ¢n loáº¡i:  â”‚  â”‚   NORMAL    â”‚
             â”‚ â€¢ WARNING   â”‚  â”‚  KhÃ´ng cÃ³   â”‚
             â”‚ â€¢ CRITICAL  â”‚  â”‚  cáº£nh bÃ¡o   â”‚
             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚ Táº¡o Alert   â”‚
             â”‚ Report      â”‚
             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚        END          â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3. Thuáº­t toÃ¡n xá»­ lÃ½ dá»¯ liá»‡u 0 (Zero Data Handling)

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚       START         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Nháº­n DataFrame     â”‚
                    â”‚  tá»« Firebase        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚         CÃ³ giÃ¡ trá»‹ 0 báº¥t thÆ°á»ng?          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚                â”‚
                   Yesâ”‚                â”‚No
                      â–¼                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Ãp dá»¥ng method: â”‚   â”‚ Giá»¯ nguyÃªn      â”‚
         â”‚ â€¢ auto_fill     â”‚   â”‚ dá»¯ liá»‡u         â”‚
         â”‚ â€¢ smart         â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ â€¢ none          â”‚            â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                  â”‚                     â”‚
                  â–¼                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
         â”‚ Forward Fill    â”‚            â”‚
         â”‚ (ffill) cho     â”‚            â”‚
         â”‚ cÃ¡c giÃ¡ trá»‹ 0   â”‚            â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                  â”‚                     â”‚
                  â–¼                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
         â”‚ Backward Fill   â”‚            â”‚
         â”‚ (bfill) cho     â”‚            â”‚
         â”‚ pháº§n cÃ²n láº¡i    â”‚            â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                  â”‚                     â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Tráº£ vá» DataFrame   â”‚
                    â”‚  Ä‘Ã£ xá»­ lÃ½           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚        END          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4. Thuáº­t toÃ¡n phÃ¡t hiá»‡n máº¥t káº¿t ná»‘i

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚       START         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Láº¥y timestamp      â”‚
                    â”‚  báº£n ghi má»›i nháº¥t   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  current_time -     â”‚
                    â”‚  last_data_time     â”‚
                    â”‚  = time_diff        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚      time_diff > 60s?         â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚                â”‚
                   Yesâ”‚                â”‚No
                      â–¼                â–¼
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚ DISCONNECTEDâ”‚   â”‚  CONNECTED  â”‚
             â”‚             â”‚   â”‚             â”‚
             â”‚ â€¢ Hiá»ƒn thá»‹  â”‚   â”‚ â€¢ Hiá»ƒn thá»‹  â”‚
             â”‚   cáº£nh bÃ¡o  â”‚   â”‚   dá»¯ liá»‡u   â”‚
             â”‚ â€¢ Äáº·t cÃ¡c   â”‚   â”‚   bÃ¬nh      â”‚
             â”‚   metric = 0â”‚   â”‚   thÆ°á»ng    â”‚
             â”‚ (trá»« energy)â”‚   â”‚             â”‚
             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚        END          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. CHá»¨C NÄ‚NG GIAO DIá»†N WEB

### 5.1. Tá»•ng quan giao diá»‡n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    â˜€ï¸ SOLAR PANEL MONITORING SYSTEM                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     SIDEBAR        â”‚    â”‚              MAIN CONTENT                  â”‚  â”‚
â”‚  â”‚                    â”‚    â”‚                                            â”‚  â”‚
â”‚  â”‚  ğŸ¨ Theme Toggle   â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  [ğŸŒ™ Tá»‘i] [â˜€ï¸ SÃ¡ng]â”‚    â”‚  â”‚         METRIC CARDS                 â”‚  â”‚  â”‚
â”‚  â”‚                    â”‚    â”‚  â”‚  âš¡ Volt  ğŸ”Œ Amp  ğŸ’¡ Power  ğŸŒ Lux  â”‚  â”‚  â”‚
â”‚  â”‚  ğŸ“Š Cháº¿ Ä‘á»™ xem     â”‚    â”‚  â”‚  ğŸŒ¡ï¸ Temp  ğŸ’§ Humi  âš¡ Energy        â”‚  â”‚  â”‚
â”‚  â”‚  â—‹ Real-time       â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â—‹ PhÃ¢n tÃ­ch giá»   â”‚    â”‚                                            â”‚  â”‚
â”‚  â”‚  â—‹ PhÃ¢n tÃ­ch ngÃ y  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â—‹ So sÃ¡nh lá»‹ch sá»­ â”‚    â”‚  â”‚           CHARTS                     â”‚  â”‚  â”‚
â”‚  â”‚                    â”‚    â”‚  â”‚  ğŸ“ˆ Äiá»‡n Ã¡p  ğŸ“ˆ DÃ²ng Ä‘iá»‡n            â”‚  â”‚  â”‚
â”‚  â”‚  â° Thá»i gian      â”‚    â”‚  â”‚  ğŸ“ˆ CÃ´ng suáº¥t  ğŸ“ˆ Ãnh sÃ¡ng          â”‚  â”‚  â”‚
â”‚  â”‚  ğŸ“… Chá»n ngÃ y      â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  ğŸ• Chá»n giá»       â”‚    â”‚                                            â”‚  â”‚
â”‚  â”‚                    â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  ğŸ”§ Xá»­ lÃ½ dá»¯ liá»‡u  â”‚    â”‚  â”‚       PERFORMANCE ANALYSIS           â”‚  â”‚  â”‚
â”‚  â”‚  [auto_fill â–¼]     â”‚    â”‚  â”‚  â€¢ Performance Ratio                 â”‚  â”‚  â”‚
â”‚  â”‚                    â”‚    â”‚  â”‚  â€¢ Hiá»‡u suáº¥t chuyá»ƒn Ä‘á»•i              â”‚  â”‚  â”‚
â”‚  â”‚  ğŸ”„ Auto Refresh   â”‚    â”‚  â”‚  â€¢ Health Score                      â”‚  â”‚  â”‚
â”‚  â”‚  [âœ“] 3 giÃ¢y        â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                    â”‚    â”‚                                            â”‚  â”‚
â”‚  â”‚  â˜€ï¸ ThÃ´ng sá»‘ pin   â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  [ğŸ“‹ Xem thÃ´ng sá»‘] â”‚    â”‚  â”‚       ANOMALY DETECTION              â”‚  â”‚  â”‚
â”‚  â”‚                    â”‚    â”‚  â”‚  ğŸ”” Cáº£nh bÃ¡o báº¥t thÆ°á»ng              â”‚  â”‚  â”‚
â”‚  â”‚  [ğŸ”„ LÃ m má»›i]      â”‚    â”‚  â”‚  âœ… Hoáº·c: Há»‡ thá»‘ng bÃ¬nh thÆ°á»ng       â”‚  â”‚  â”‚
â”‚  â”‚  [ğŸ—‘ï¸ Clear Cache] â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                    â”‚    â”‚                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2. Chi tiáº¿t cÃ¡c chá»©c nÄƒng

#### 5.2.1. Dashboard Real-time (HTML)

| Chá»©c nÄƒng | MÃ´ táº£ |
|-----------|-------|
| **Hiá»ƒn thá»‹ thÃ´ng sá»‘** | Volt, Amp, Power, Lux, Temp, Humi, Energy |
| **Biá»ƒu Ä‘á»“ real-time** | 6 biá»ƒu Ä‘á»“ cáº­p nháº­t liÃªn tá»¥c (Chart.js) |
| **Chá»n ngÃ y/giá»** | Xem dá»¯ liá»‡u lá»‹ch sá»­ |
| **Auto refresh** | Tá»± Ä‘á»™ng cáº­p nháº­t 1-2 giÃ¢y |
| **PhÃ¡t hiá»‡n máº¥t káº¿t ná»‘i** | Cáº£nh bÃ¡o náº¿u >60s khÃ´ng cÃ³ data má»›i |

#### 5.2.2. PhÃ¢n tÃ­ch nÃ¢ng cao (Streamlit)

| Chá»©c nÄƒng | MÃ´ táº£ |
|-----------|-------|
| **Real-time View** | GiÃ¡m sÃ¡t trá»±c tiáº¿p vá»›i auto-refresh |
| **PhÃ¢n tÃ­ch theo giá»** | Xem chi tiáº¿t dá»¯ liá»‡u cá»§a 1 giá» cá»¥ thá»ƒ |
| **PhÃ¢n tÃ­ch theo ngÃ y** | Thá»‘ng kÃª tá»•ng há»£p theo ngÃ y |
| **So sÃ¡nh lá»‹ch sá»­** | So sÃ¡nh hiá»‡u suáº¥t qua nhiá»u ngÃ y |
| **Health Score** | Äiá»ƒm sá»©c khá»e táº¥m pin (A-F) |
| **Anomaly Detection** | PhÃ¡t hiá»‡n vÃ  cáº£nh bÃ¡o báº¥t thÆ°á»ng |
| **Theme Toggle** | Chuyá»ƒn Ä‘á»•i giao diá»‡n SÃ¡ng/Tá»‘i |

#### 5.2.3. CÃ¡c chá»‰ sá»‘ hiá»ƒn thá»‹

| Chá»‰ sá»‘ | ÄÆ¡n vá»‹ | MÃ u | NgÆ°á»¡ng |
|--------|--------|-----|--------|
| Voltage | V | ğŸŸ¢ Xanh lÃ¡ | 0.5 - 25V |
| Current | A | ğŸ”µ Xanh dÆ°Æ¡ng | 0 - 10A |
| Power | mW | ğŸŸ  Cam | 0 - 20,000mW |
| Illuminance | Lux | ğŸŸ¡ VÃ ng | 0 - 120,000 Lux |
| Temperature | Â°C | ğŸ”´ Äá» | -10 - 85Â°C |
| Humidity | % | ğŸ”µ Cyan | 0 - 100% |
| Energy | Wh | ğŸŸ£ TÃ­m | TÃ­ch lÅ©y |

### 5.3. CÃ¡c loáº¡i biá»ƒu Ä‘á»“

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BIá»‚U Äá»’ TIME SERIES                      â”‚
â”‚                                                               â”‚
â”‚  â–² Value                                                      â”‚
â”‚  â”‚     â•­â”€â•®                                                    â”‚
â”‚  â”‚    â•±   â•²    â•­â”€â”€â”€â•®                                         â”‚
â”‚  â”‚   â•±     â•²  â•±     â•²   â•­â”€â•®                                  â”‚
â”‚  â”‚â”€â”€â•±â”€â”€â”€â”€â”€â”€â”€â•²â•±â”€â”€â”€â”€â”€â”€â”€â•²â”€â•±   â•²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Time     â”‚
â”‚  â”‚                                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Hiá»ƒn thá»‹ tá»‘i Ä‘a 200 Ä‘iá»ƒm (trÃ¡nh trÃ n)                      â”‚
â”‚  â€¢ Tá»± Ä‘á»™ng scroll theo thá»i gian                              â”‚
â”‚  â€¢ Há»— trá»£ zoom vÃ  pan                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BIá»‚U Äá»’ PERFORMANCE RATIO                  â”‚
â”‚                                                               â”‚
â”‚  100% â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚       â”‚                                                       â”‚
â”‚   70% â”œ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€  â† NgÆ°á»¡ng cáº£nh bÃ¡o â”‚
â”‚       â”‚    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                       â”‚
â”‚   50% â”œ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€  â† NgÆ°á»¡ng nghiÃªm   â”‚
â”‚       â”‚                                          trá»ng        â”‚
â”‚    0% â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚         Time â†’                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      GAUGE CHART (Äá»“ng há»“ Ä‘o)                 â”‚
â”‚                                                               â”‚
â”‚                    â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®                            â”‚
â”‚                 â•±                   â•²                         â”‚
â”‚               â•±    ğŸ”´  ğŸŸ¡  ğŸŸ¢        â•²                       â”‚
â”‚              â”‚                        â”‚                       â”‚
â”‚              â”‚         15.2 V         â”‚                       â”‚
â”‚               â•²                      â•±                        â”‚
â”‚                 â•²_______________â•±                             â”‚
â”‚                                                               â”‚
â”‚  â€¢ Hiá»ƒn thá»‹ giÃ¡ trá»‹ hiá»‡n táº¡i                                  â”‚
â”‚  â€¢ MÃ u theo ngÆ°á»¡ng: Äá» < 30% < VÃ ng < 70% < Xanh             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Cáº¤U TRÃšC MÃƒ NGUá»’N

### 6.1. CÃ¢y thÆ° má»¥c

```
giao_dien_streamlit/
â”‚
â”œâ”€â”€ ğŸ“„ app.py                    # Entry point chÃ­nh
â”‚   â”œâ”€â”€ set_page_config()        # Cáº¥u hÃ¬nh Streamlit
â”‚   â”œâ”€â”€ show_home()              # Trang chá»§
â”‚   â”œâ”€â”€ show_realtime_dashboard()# Dashboard HTML
â”‚   â””â”€â”€ show_advanced_analysis() # PhÃ¢n tÃ­ch nÃ¢ng cao
â”‚
â”œâ”€â”€ ğŸ“„ dashboard.py              # Dashboard Streamlit nÃ¢ng cao
â”‚   â”œâ”€â”€ apply_custom_css()       # CSS cho theme sÃ¡ng/tá»‘i
â”‚   â”œâ”€â”€ init_firebase()          # Khá»Ÿi táº¡o Firebase
â”‚   â”œâ”€â”€ fetch_data_for_hour()    # Láº¥y dá»¯ liá»‡u theo giá»
â”‚   â”œâ”€â”€ clean_zero_data()        # Xá»­ lÃ½ dá»¯ liá»‡u 0
â”‚   â”œâ”€â”€ get_data_status()        # Kiá»ƒm tra káº¿t ná»‘i
â”‚   â”œâ”€â”€ create_time_series_chart()# Táº¡o biá»ƒu Ä‘á»“
â”‚   â”œâ”€â”€ show_realtime_view()     # View Real-time
â”‚   â”œâ”€â”€ show_hourly_analysis()   # PhÃ¢n tÃ­ch theo giá»
â”‚   â”œâ”€â”€ show_daily_analysis()    # PhÃ¢n tÃ­ch theo ngÃ y
â”‚   â””â”€â”€ show_historical_comparison()# So sÃ¡nh lá»‹ch sá»­
â”‚
â”œâ”€â”€ ğŸ“„ analysis.py               # Thuáº­t toÃ¡n phÃ¢n tÃ­ch
â”‚   â”œâ”€â”€ class PanelSpecs         # ThÃ´ng sá»‘ táº¥m pin
â”‚   â”œâ”€â”€ class SolarPanelAnalyzer # Bá»™ phÃ¢n tÃ­ch
â”‚   â”‚   â”œâ”€â”€ calculate_efficiency()
â”‚   â”‚   â”œâ”€â”€ calculate_performance_ratio()
â”‚   â”‚   â”œâ”€â”€ detect_anomalies()
â”‚   â”‚   â”œâ”€â”€ get_health_score()
â”‚   â”‚   â”œâ”€â”€ analyze_degradation_trend()
â”‚   â”‚   â””â”€â”€ generate_daily_report()
â”‚   â””â”€â”€ class AlertLevel         # Má»©c Ä‘á»™ cáº£nh bÃ¡o
â”‚
â”œâ”€â”€ ğŸ“„ index.html                # Dashboard HTML thuáº§n
â”‚   â”œâ”€â”€ Firebase JS SDK          # Káº¿t ná»‘i Firebase
â”‚   â”œâ”€â”€ Chart.js                 # Váº½ biá»ƒu Ä‘á»“
â”‚   â”œâ”€â”€ updateCard()             # Cáº­p nháº­t metric
â”‚   â”œâ”€â”€ startRealtimeListener()  # Láº¯ng nghe real-time
â”‚   â””â”€â”€ checkConnectionStatus()  # Kiá»ƒm tra káº¿t ná»‘i
â”‚
â”œâ”€â”€ ğŸ“„ requirements.txt          # Dependencies Python
â”œâ”€â”€ ğŸ“„ runtime.txt               # Python version
â”œâ”€â”€ ğŸ“„ firebase-key.json         # Firebase credentials (local)
â”œâ”€â”€ ğŸ“„ .gitignore                # Git ignore
â””â”€â”€ ğŸ“„ HUONG_DAN_*.md            # CÃ¡c file hÆ°á»›ng dáº«n
```

### 6.2. Dependencies (requirements.txt)

```
streamlit>=1.40.0
firebase-admin>=6.4.0
plotly>=5.24.0
pandas>=2.2.2
numpy>=1.26.0
streamlit-autorefresh>=1.0.1
```

### 6.3. Class Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PanelSpecs                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + rated_power: float = 20.0                                     â”‚
â”‚ + rated_voltage: float = 16.0                                   â”‚
â”‚ + rated_current: float = 1.25                                   â”‚
â”‚ + open_circuit_voltage: float = 19.2                            â”‚
â”‚ + short_circuit_current: float = 1.5                            â”‚
â”‚ + panel_area: float = 0.14                                      â”‚
â”‚ + temp_coefficient: float = -0.004                              â”‚
â”‚ + stc_irradiance: float = 1000.0                                â”‚
â”‚ + stc_temperature: float = 25.0                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ uses
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SolarPanelAnalyzer                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - specs: PanelSpecs                                             â”‚
â”‚ - history: List[PerformanceMetrics]                             â”‚
â”‚ - anomalies: List[AnomalyReport]                                â”‚
â”‚ - thresholds: dict                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + __init__(panel_specs: PanelSpecs)                             â”‚
â”‚ + lux_to_irradiance(lux: float) â†’ float                         â”‚
â”‚ + calculate_efficiency(power_mw, irradiance) â†’ float            â”‚
â”‚ + calculate_performance_ratio(power, irr, temp) â†’ float         â”‚
â”‚ + calculate_expected_power(irradiance, temp) â†’ float            â”‚
â”‚ + detect_anomalies(U, I, P, Lux, Temp, Humi) â†’ List             â”‚
â”‚ + get_health_score(df: DataFrame) â†’ dict                        â”‚
â”‚ + analyze_degradation_trend(df: DataFrame) â†’ dict               â”‚
â”‚ + generate_daily_report(df, date) â†’ dict                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ creates
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       AnomalyReport                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + timestamp: datetime                                           â”‚
â”‚ + anomaly_type: str                                             â”‚
â”‚ + parameter: str                                                â”‚
â”‚ + value: float                                                  â”‚
â”‚ + expected_range: Tuple[float, float]                           â”‚
â”‚ + severity: AlertLevel                                          â”‚
â”‚ + message: str                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. THÃ”NG Sá» Ká»¸ THUáº¬T

### 7.1. CÃ´ng thá»©c tÃ­nh toÃ¡n

#### Performance Ratio (PR)

```
PR (%) = (P_actual / P_expected) Ã— 100

Trong Ä‘Ã³:
  P_expected = P_rated Ã— (G / G_stc) Ã— [1 + Î± Ã— (T - T_stc)]
  
  P_rated  = 20W (CÃ´ng suáº¥t Ä‘á»‹nh má»©c)
  G        = Irradiance thá»±c táº¿ (W/mÂ²)
  G_stc    = 1000 W/mÂ² (Irradiance tiÃªu chuáº©n)
  Î±        = -0.004 (Há»‡ sá»‘ nhiá»‡t Ä‘á»™: -0.4%/Â°C)
  T        = Nhiá»‡t Ä‘á»™ thá»±c táº¿ (Â°C)
  T_stc    = 25Â°C (Nhiá»‡t Ä‘á»™ tiÃªu chuáº©n)
```

#### Hiá»‡u suáº¥t chuyá»ƒn Ä‘á»•i (Î·)

```
Î· (%) = (P_output / P_input) Ã— 100

Trong Ä‘Ã³:
  P_output = CÃ´ng suáº¥t Ä‘áº§u ra thá»±c táº¿ (W)
  P_input  = G Ã— A (CÃ´ng suáº¥t bá»©c xáº¡ máº·t trá»i)
  G        = Irradiance (W/mÂ²)
  A        = 0.14 mÂ² (Diá»‡n tÃ­ch táº¥m pin)
```

#### Chuyá»ƒn Ä‘á»•i Lux sang Irradiance

```
G (W/mÂ²) = Lux / 120

Há»‡ sá»‘ chuyá»ƒn Ä‘á»•i 120 lÃ  giÃ¡ trá»‹ trung bÃ¬nh cho Ã¡nh sÃ¡ng máº·t trá»i tá»± nhiÃªn.
```

### 7.2. NgÆ°á»¡ng cáº£nh bÃ¡o

| ThÃ´ng sá»‘ | Normal | Warning | Critical |
|----------|--------|---------|----------|
| Voltage | 10-20V | 5-10V hoáº·c 20-22V | <5V hoáº·c >22V |
| Current | 0.5-2A | 0.1-0.5A hoáº·c 2-3A | <0.1A hoáº·c >3A |
| Temperature | 20-45Â°C | 45-60Â°C | >60Â°C hoáº·c <0Â°C |
| PR | >70% | 50-70% | <50% |
| Efficiency | >12% | 8-12% | <8% |

### 7.3. Health Score (Äiá»ƒm sá»©c khá»e)

| Grade | Score | MÃ´ táº£ |
|-------|-------|-------|
| A | 90-100 | Xuáº¥t sáº¯c - Hoáº¡t Ä‘á»™ng tá»‘i Æ°u |
| B | 75-89 | Tá»‘t - Hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng |
| C | 60-74 | Trung bÃ¬nh - Cáº§n theo dÃµi |
| D | 40-59 | KÃ©m - Cáº§n báº£o trÃ¬ |
| F | 0-39 | NghiÃªm trá»ng - Cáº§n sá»­a chá»¯a ngay |

---

## 8. TRIá»‚N KHAI VÃ€ Váº¬N HÃ€NH

### 8.1. YÃªu cáº§u há»‡ thá»‘ng

- **Python**: 3.10 - 3.12
- **RAM**: Tá»‘i thiá»ƒu 512MB
- **Storage**: Tá»‘i thiá»ƒu 100MB
- **Network**: Káº¿t ná»‘i Internet á»•n Ä‘á»‹nh

### 8.2. CÃ i Ä‘áº·t Local

```bash
# 1. Clone repository
git clone https://github.com/tranthihangng/NLMT.git
cd giao_dien_streamlit

# 2. Táº¡o virtual environment
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows

# 3. CÃ i Ä‘áº·t dependencies
pip install -r requirements.txt

# 4. Äáº·t file firebase-key.json vÃ o thÆ° má»¥c gá»‘c

# 5. Cháº¡y á»©ng dá»¥ng
streamlit run app.py
```

### 8.3. Triá»ƒn khai Streamlit Cloud

1. **Push code lÃªn GitHub**
2. **Truy cáº­p** [share.streamlit.io](https://share.streamlit.io)
3. **Deploy app** tá»« repository
4. **Cáº¥u hÃ¬nh Secrets** (Firebase credentials)
5. **Chá» deploy hoÃ n táº¥t**

### 8.4. Cáº¥u hÃ¬nh Firebase Secrets

```toml
[firebase]
type = "service_account"
project_id = "nlmt-duy"
private_key_id = "your_private_key_id"
private_key = "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
client_email = "firebase-adminsdk-xxxxx@nlmt-duy.iam.gserviceaccount.com"
client_id = "your_client_id"
auth_uri = "https://accounts.google.com/o/oauth2/auth"
token_uri = "https://oauth2.googleapis.com/token"
databaseURL = "https://nlmt-duy-default-rtdb.firebaseio.com"
```

---

## ğŸ“Œ PHá»¤ Lá»¤C

### A. Danh sÃ¡ch file trong dá»± Ã¡n

| File | DÃ²ng code | MÃ´ táº£ |
|------|-----------|-------|
| app.py | ~574 | Entry point chÃ­nh |
| dashboard.py | ~1872 | Dashboard nÃ¢ng cao |
| analysis.py | ~608 | Thuáº­t toÃ¡n phÃ¢n tÃ­ch |
| index.html | ~1700 | Dashboard HTML |
| requirements.txt | ~9 | Dependencies |

### B. CÃ¡c thÆ° viá»‡n sá»­ dá»¥ng

| ThÆ° viá»‡n | Version | Má»¥c Ä‘Ã­ch |
|----------|---------|----------|
| streamlit | >=1.40.0 | Framework web UI |
| firebase-admin | >=6.4.0 | Káº¿t ná»‘i Firebase |
| plotly | >=5.24.0 | Váº½ biá»ƒu Ä‘á»“ tÆ°Æ¡ng tÃ¡c |
| pandas | >=2.2.2 | Xá»­ lÃ½ dá»¯ liá»‡u |
| numpy | >=1.26.0 | TÃ­nh toÃ¡n sá»‘ há»c |
| streamlit-autorefresh | >=1.0.1 | Auto refresh |

### C. Link tÃ i liá»‡u

- **Firebase Console**: https://console.firebase.google.com/
- **Streamlit Docs**: https://docs.streamlit.io/
- **Plotly Docs**: https://plotly.com/python/

---

**TÃ¡c giáº£**: Solar Monitoring System  
**NgÃ y táº¡o**: 28/12/2025  
**Version**: 1.0

